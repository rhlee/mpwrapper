#!/usr/bin/env pypy

import sys
import os
import subprocess
import re
import io

if len(sys.argv) == 1:
  print "Error: no argument(s)"
  exit(1)

mpCommand = "mplayer -v -vf eq2"

ps = subprocess.Popen(mpCommand.split(' ') + [sys.argv[1]],
  stdout=subprocess.PIPE, stderr=subprocess.STDOUT,
  universal_newlines = True)

posRe = re.compile('^A:\s*([^\s]+)\s*')
for line in ps.stdout:
  line = line.rstrip('\n')
  posMatch = posRe.match(line)
  if posMatch:
    print posMatch.group(1)
